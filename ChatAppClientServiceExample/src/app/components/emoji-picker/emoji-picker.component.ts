import { Component } from '@angular/core';
import { MatDialogRef } from '@angular/material/dialog';

@Component({
  selector: 'app-emoji-picker',
  templateUrl: './emoji-picker.component.html',
  styleUrls: ['./emoji-picker.component.css']
})
export class EmojiPickerComponent {
  emojis: string[] = [
    // Smileys & Emotion
    '😀', '😁', '😂', '🤣', '😃', '😄', '😅', '😆', '😉', '😊', '😋', '😎', '😍', '😘', '😗', '😙', '😚', '☺️', '🙂', '🤗', '🤩',
    '🤔', '🤨', '😐', '😑', '😶', '🙄', '😏', '😣', '😥', '😮', '🤐', '😯', '😪', '😫', '😴', '😌', '😛', '😜', '😝', '🤤',
    '😒', '😓', '😔', '😕', '🙃', '🤑', '😲', '☹️', '🙁', '😖', '😞', '😟', '😤', '😢', '😭', '😦', '😧', '😨', '😩', '🤯',
    '😬', '😰', '😱', '🥵', '🥶', '😳', '🤪', '😵', '😡', '😠', '🤬', '😷', '🤒', '🤕', '🤢', '🤮', '🤧', '😇', '🥳', '🥺',
    '🤠', '🤡', '🤥', '🤫', '🤭', '🧐', '🤓',

    // People & Body
    '👶', '🧒', '👦', '👧', '🧑', '👱‍♂️', '👱‍♀️', '👨', '👩', '🧔', '👵', '🧓', '👴', '👲', '👳‍♂️', '👳‍♀️', '🧕', '👮‍♂️', '👮‍♀️', '👷‍♂️',
    '👷‍♀️', '💂‍♂️', '💂‍♀️', '🕵️‍♂️', '🕵️‍♀️', '👩‍⚕️', '👨‍⚕️', '👩‍🌾', '👨‍🌾', '👩‍🍳', '👨‍🍳', '👩‍🎓', '👨‍🎓', '👩‍🎤', '👨‍🎤', '👩‍🏫', '👨‍🏫',
    '👩‍🏭', '👨‍🏭', '👩‍💻', '👨‍💻', '👩‍💼', '👨‍💼', '👩‍🔧', '👨‍🔧', '👩‍🔬', '👨‍🔬', '👩‍🎨', '👨‍🎨', '👩‍🚒', '👨‍🚒', '👩‍✈️', '👨‍✈️', '👩‍🚀', '👨‍🚀',
    '👩‍⚖️', '👨‍⚖️', '👰', '🤵', '👸', '🤴', '🤶', '🎅', '🧙‍♂️', '🧙‍♀️', '🧝‍♂️', '🧝‍♀️', '🧛‍♂️', '🧛‍♀️', '🧟‍♂️', '🧟‍♀️', '🧞‍♂️', '🧞‍♀️', '🧜‍♂️', '🧜‍♀️',
    '🧚‍♂️', '🧚‍♀️', '👼', '🤰', '🤱', '🙇‍♂️', '🙇‍♀️', '💁‍♂️', '💁‍♀️', '🙅‍♂️', '🙅‍♀️', '🙆‍♂️', '🙆‍♀️', '🙋‍♂️', '🙋‍♀️', '🤦‍♂️', '🤦‍♀️', '🤷‍♂️', '🤷‍♀️',
    '🙎‍♂️', '🙎‍♀️', '🙍‍♂️', '🙍‍♀️', '💇‍♂️', '💇‍♀️', '💆‍♂️', '💆‍♀️', '🧖‍♂️', '🧖‍♀️', '💅', '🤳', '💪', '👈', '👉', '☝️', '👆', '🖕', '👇', '✌️',
    '🤞', '🖖', '🤘', '🤙', '🖐️', '✋', '👌', '👍', '👎', '✊', '👊', '🤛', '🤜', '👏', '🙌', '👐', '🤲', '🤝', '🙏',

    // Animals & Nature
    '🐵', '🐒', '🦍', '🐶', '🐕', '🐩', '🐺', '🦊', '🦝', '🐱', '🐈', '🦁', '🐯', '🐅', '🐆', '🐴', '🐎', '🦄', '🦓', '🦌',
    '🐮', '🐂', '🐃', '🐄', '🐷', '🐖', '🐗', '🐽', '🐏', '🐑', '🐐', '🐪', '🐫', '🦙', '🦒', '🐘', '🦏', '🦛', '🐭', '🐁',
    '🐀', '🐹', '🐰', '🐇', '🦔', '🦇', '🐻', '🐨', '🐼', '🦥', '🦦', '🦨', '🦘', '🦡', '🐾', '🦃', '🐔', '🐓', '🐣', '🐤',
    '🐥', '🐦', '🐧', '🕊️', '🦅', '🦆', '🦢', '🦉', '🦩', '🦚', '🦜', '🐸', '🐊', '🐢', '🦎', '🐍', '🐲', '🐉', '🦕', '🦖',
    '🐳', '🐋', '🐬', '🐟', '🐠', '🐡', '🦈', '🐙', '🦑', '🦀', '🦞', '🦐', '🦪', '🐚', '🦧', '🐌', '🦋', '🐛', '🐜', '🐝',
    '🐞', '🦗', '🕷️', '🕸️', '🦂', '🦟', '🦠', '💐', '🌸', '💮', '🏵️', '🌹', '🥀', '🌺', '🌻', '🌼', '🌷', '🌱', '🌲', '🌳',
    '🌴', '🌵', '🌾', '🌿', '☘️', '🍀', '🍁', '🍂', '🍃', '🌍', '🌎', '🌏', '🌐', '🌑', '🌒', '🌓', '🌔', '🌕', '🌖', '🌗',
    '🌘', '🌙', '🌚', '🌛', '🌜', '🌡️', '☀️', '🌝', '🌞', '🪐', '⭐', '🌟', '🌠', '🌌', '☁️', '⛅', '⛈️', '🌤️', '🌥️', '🌦️',
    '🌧️', '🌨️', '🌩️', '🌪️', '🌫️', '🌬️', '🌀', '🌈', '🌂', '☂️', '☔', '⛱️', '⚡', '❄️', '☃️', '⛄', '🔥', '💧', '🌊',

    // Food & Drink
    '🍏', '🍎', '🍐', '🍊', '🍋', '🍌', '🍉', '🍇', '🍓', '🫐', '🍈', '🍒', '🍑', '🥭', '🍍', '🥥', '🥝', '🍅', '🍆', '🥑',
    '🥦', '🥬', '🥒', '🌶️', '🫑', '🌽', '🥕', '🫒', '🧄', '🧅', '🥔', '🍠', '🥐', '🍞', '🥖', '🥨', '🥯', '🥞', '🧇', '🧀',
    '🍖', '🍗', '🥩', '🥓', '🍔', '🍟', '🍕', '🌭', '🥪', '🌮', '🌯', '🫔', '🥙', '🧆', '🍜', '🍲', '🍝', '🥫', '🍣', '🍱',
    '🦪', '🍛', '🍚', '🍙', '🍘', '🍥', '🥠', '🥮', '🍢', '🍡', '🍧', '🍨', '🍦', '🥧', '🧁', '🍰', '🎂', '🍮', '🍬', '🍭',
    '🍫', '🍿', '🧋', '🍩', '🍪', '🌰', '🥜', '🍯', '🍼', '🥛', '☕', '🫖', '🍵', '🍶', '🍾', '🍷', '🍸', '🍹', '🍺', '🍻',
    '🥂', '🥃', '🫗', '🥤', '🧋', '🧃', '🧉', '🧊', '🥢', '🍽️', '🍴', '🥄', '🔪', '🏺',

    // Travel & Places
    '🚗', '🚕', '🚙', '🚌', '🚎', '🏎️', '🚓', '🚑', '🚒', '🚐', '🚚', '🚛', '🚜', '🛴', '🚲', '🛵', '🏍️', '🛺', '🚨', '🚔',
    '🚍', '🚘', '🚖', '🚡', '🚠', '🚟', '🚃', '🚋', '🚞', '🚝', '🚄', '🚅', '🚈', '🚂', '🚆', '🚇', '🚊', '🚉', '✈️', '🛫',
    '🛬', '🛩️', '💺', '🛰️', '🚀', '🛸', '🚁', '🛶', '⛵', '🚤', '🛥️', '🛳️', '⛴️', '🚢', '⚓', '🪝', '⛽', '🚧', '🚦', '🚥',
    '🛑', '🚏', '🗺️', '🗿', '🗽', '🗼', '🏰', '🏯', '🏟️', '🎡', '🎢', '🎠', '⛲', '⛱️', '🏖️', '🏝️', '🏜️', '🌋', '⛰️', '🏔️',
    '🗻', '🏕️', '🏠', '🏡', '🏘️', '🏚️', '🏗️', '🏭', '🏢', '🏬', '🏣', '🏤', '🏥', '🏦', '🏨', '🏪', '🏫', '🏩', '💒', '🏛️',
    '⛪', '🕌', '🛕', '🕍', '🕋', '⛩️', '🛤️', '🛣️', '🗾', '🎑', '🏞️', '🌅', '🌄', '🌠', '🎇', '🎆', '🌇', '🌆', '🏙️', '🌃',
    '🌌', '🌉', '🌁',

    // Objects
    '⌚', '📱', '📲', '💻', '⌨️', '🖥️', '🖨️', '🖱️', '🖲️', '🕹️', '🗜️', '💽', '💾', '💿', '📀', '📼', '📷', '📸', '📹', '🎥',
    '📽️', '🎞️', '📞', '☎️', '📟', '📠', '📺', '📻', '🎙️', '🎚️', '🎛️', '🧭', '⏱️', '⏲️', '⏰', '🕰️', '⌛', '⏳', '📡', '🔋',
    '🔌', '💡', '🔦', '🕯️', '🪔', '🧯', '🛢️', '💸', '💵', '💴', '💶', '💷', '💰', '💳', '🧾', '💎', '⚖️', '🔧', '🔨', '⚒️',
    '🛠️', '⛏️', '🔩', '⚙️', '🗜️', '⚖️', '🦯', '🔗', '⛓️', '🧰', '🧲', '🧪', '🧫', '🧬', '🩺', '💉', '💊', '🩸', '🩹', '🩼',
    '🩻', '🧻', '🚽', '🚰', '🚿', '🛁', '🛀', '🪒', '🧴', '🧷', '🧹', '🧺', '🧻', '🪑', '🛋️', '🛏️', '🚪', '🛌', '🖼️', '🪞',
    '🪟', '🛍️', '🛒', '🎁', '🎈', '🎏', '🎀', '🎊', '🎉', '🎎', '🏮', '🎐', '✉️', '📩', '📨', '📧', '💌', '📥', '📤', '📦',
    '🏷️', '📪', '📫', '📬', '📭', '📮', '📯', '📜', '📃', '📄', '📑', '📊', '📈', '📉', '🗒️', '🗓️', '📆', '📅', '🗑️', '📇',
    '🗃️', '🗳️', '🗄️', '📋', '📁', '📂', '🗂️', '🗞️', '📰', '📓', '📕', '📗', '📘', '📙', '📚', '📖', '🔖', '🧷', '🔗', '📎',
    '🖇️', '📐', '📏', '🧮', '📌', '📍', '✂️', '🖊️', '🖋️', '✒️', '🖌️', '🖍️', '📝', '✏️', '🔍', '🔎', '🔏', '🔐', '🔒', '🔓',

    // Symbols
    '❤️', '🧡', '💛', '💚', '💙', '💜', '🖤', '🤍', '🤎', '💔', '❤️‍🔥', '❤️‍🩹', '❣️', '💓', '💗', '💖', '💘', '💝', '💟', '💞',
    '💌', '🔔', '🔕', '📣', '📢', '🗨️', '💬', '👁️‍🗨️', '🗯️', '💭', '💤', '🅰️', '🅱️', '🆎', '🆑', '🆒', '🆓', '🆔', '🆕', '🆖',
    '🆗', '🆘', '🆙', '🆚', '🈁', '🈂️', '🈷️', '🈶', '🈯', '🉐', '🈹', '🈚', '🈲', '🉑', '🈸', '🈴', '🈳', '㊗️', '㊙️', '🈺',
    '🈵', '🔴', '🔵', '⚪', '⚫', '⬜', '⬛', '🔶', '🔷', '🔸', '🔹', '🔺', '🔻', '🔘', '🔲', '🔳', '◼️', '◻️', '◾', '◽',
    '🟥', '🟧', '🟨', '🟩', '🟦', '🟪', '🟫', '⬛', '⬜', '🔳', '🔲', '🏁', '🚩', '🎌', '🏴', '🏳️', '🏳️‍🌈', '🏴‍☠️', '🚻', '🚼',
    '🚹', '🚺', '🚾', '🛂', '🛃', '🛄', '🛅', '⚠️', '🚸', '⛔', '🚫', '🚳', '🚭', '🚯', '🚱', '🚷', '📵', '🔞', '☢️', '☣️',
    '⬆️', '↗️', '➡️', '↘️', '⬇️', '↙️', '⬅️', '↖️', '↕️', '↔️', '↩️', '↪️', '⤴️', '⤵️', '🔃', '🔄', '🔙', '🔚', '🔛', '🔜',
    '🔝', '🛐', '⚛️', '🕉️', '✡️', '☸️', '☯️', '✝️', '☦️', '☪️', '☮️', '🕎', '🔯', '♈', '♉', '♊', '♋', '♌', '♍',
    '♎', '♏', '♐', '♑', '♒', '♓', '🆔', '⚕️', '⚚', '☤', '⚖️', '⚗️', '⚙️', '⚛️', '🛠️', '⚒️', '⚔️', '⛏️', '⚰️', '⚱️', '⚕️', '⚖️',
    '⚗️', '⚙️', '⚛️', '⛏️', '⚔️', '⚰️', '⚱️', '⚛️', '⚗️', '⚖️', '⚕️', '⚛️', '⚙️', '⚖️', '⚗️', '⚙️', '⚛️', '⚗️', '⚛️', '⚙️',
    '⚗️', '⚛️', '⚗️', '⚙️', '⚛️', '⚗️', '⚛️', '⚙️', '⚗️', '⚛️', '⚗️', '⚛️', '⚙️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️',
    '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️', '⚛️', '⚗️'
  ];

  recentEmojis: string[] = [];
  filteredEmojis: string[] = [];
  searchTerm: string = '';

  constructor(public dialogRef: MatDialogRef<EmojiPickerComponent>) {
    this.filteredEmojis = [...this.emojis];
    this.loadRecentEmojis();
  }

  filterEmojis(): void {
    if (this.searchTerm.trim()) {
      this.filteredEmojis = this.emojis.filter(emoji => emoji.includes(this.searchTerm.trim()));
    } else {
      this.filteredEmojis = [...this.emojis];
    }
  }

  selectEmoji(emoji: string): void {
    this.saveToRecentEmojis(emoji);
    this.dialogRef.close(emoji);  // Close modal and return selected emoji
  }

  saveToRecentEmojis(emoji: string): void {
    if (!this.recentEmojis.includes(emoji)) {
      this.recentEmojis.unshift(emoji);
      if (this.recentEmojis.length > 10) {  // Keep only the last 10 used emojis
        this.recentEmojis.pop();
      }
      sessionStorage.setItem('recentEmojis', JSON.stringify(this.recentEmojis));
    }
  }

  loadRecentEmojis(): void {
    const savedRecentEmojis = sessionStorage.getItem('recentEmojis');
    if (savedRecentEmojis) {
      this.recentEmojis = JSON.parse(savedRecentEmojis);
    }
  }
}
